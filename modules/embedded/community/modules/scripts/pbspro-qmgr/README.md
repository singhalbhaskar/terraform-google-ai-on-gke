## Description

This module creates a Toolkit runner that performs the following administrative
PBS configurations on a PBS server:

- create Vnode configurations for each execution host
- configure the server to trust each client host for job submissions
- load a configuration file as formatted by `qmgr -c "print server"`

### Example

The following code snippet demonstrates use of this module:

```yaml
  - id: pbspro_qmgr
    source: community/modules/scripts/pbspro-qmgr
    settings:
      client_host_count: 1
      client_hostname_prefix: pbs-client
      execution_host_count: 10
      execution_hostname_prefix: pbs-execution
      server_conf: |
        set queue workq queue_type = Execution
        set queue workq enabled = True
        set queue workq started = True
        set server scheduling = True
        set server default_queue = workq
    outputs:
    - runners
```

Toolkit runners execute on first boot and all VM reboots. The `var.server_conf`
setting has been configured such that it will only execute upon changes to the
configuration. Nevertheless, care should be taken not to include commands that
will fail if run twice. For example, `create queue workq` would succeed upon
first boot but not a subsequent reboot.

## Support

PBS Professional is licensed and supported by [Altair][pbspro]. This module is
maintained and supported by the Cluster Toolkit team in collaboration with Altair.

[pbspro]: https://www.altair.com/pbs-professional

## License

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| client\_host\_count | Number of execution hosts to provision | `number` | `0` | no |
| client\_hostname\_prefix | Name prefix for execution hosts | `string` | n/a | yes |
| execution\_host\_count | Number of execution hosts to provision | `number` | n/a | yes |
| execution\_hostname\_prefix | Name prefix for execution hosts | `string` | n/a | yes |
| server\_conf | A sequence of qmgr commands in format as generated by qmgr -c 'print server' | `string` | `"# empty qmgr configuration file"` | no |

## Outputs

| Name | Description |
|------|-------------|
| runners | Toolkit runners for qmgr commands |

<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
